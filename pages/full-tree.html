<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Family Tree - Family Lineage</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        /* Additional styles for the full tree view */
        .full-tree-container {
            overflow-x: auto;
            min-height: 600px;
        }
        
        .tree-wrapper {
            min-width: 1800px;
            position: relative;
            padding: 2rem;
        }
        
        .zoom-controls {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background-color: white;
            border-radius: 50px;
            padding: 0.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            z-index: 100;
        }
        
        .zoom-btn {
            width: 40px;
            height: 40px;
            border: none;
            background-color: #2c3e50;
            color: white;
            font-size: 1.2rem;
            border-radius: 50%;
            margin: 0 0.3rem;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .zoom-btn:hover {
            background-color: #3498db;
        }
        
        .generation-divider {
            border-top: 1px dashed #ccc;
            margin: 2rem 0;
            position: relative;
        }
        
        .generation-label {
            position: absolute;
            top: -12px;
            left: 20px;
            background-color: white;
            padding: 0 10px;
            font-size: 0.9rem;
            color: #777;
        }
    </style>
</head>
<body>
    <header>
        <h1>Family Lineage</h1>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="full-tree.html" class="active">Full Tree</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section>
            <h2>Complete Family Tree</h2>
            <p>Below is the complete view of all seven generations. You can zoom in/out and pan to explore the entire tree. Click on any individual to see their detailed information.</p>
        </section>

        <div class="full-tree-container">
            <div class="tree-wrapper" id="tree-wrapper">
                <div class="loading">Loading full family tree...</div>
                <!-- The tree will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="zoom-controls">
            <button class="zoom-btn" id="zoom-in">+</button>
            <button class="zoom-btn" id="zoom-out">−</button>
            <button class="zoom-btn" id="zoom-reset">↺</button>
        </div>
    </main>

    <footer>
        <p>&copy; <span id="current-year"></span> Family Lineage. All Rights Reserved.</p>
    </footer>

    <script src="../js/data.js"></script>
    <script>
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Zoom functionality
        let scale = 1;
        const treeWrapper = document.getElementById('tree-wrapper');
        
        document.getElementById('zoom-in').addEventListener('click', function() {
            if (scale < 2) {
                scale += 0.1;
                updateZoom();
            }
        });
        
        document.getElementById('zoom-out').addEventListener('click', function() {
            if (scale > 0.5) {
                scale -= 0.1;
                updateZoom();
            }
        });
        
        document.getElementById('zoom-reset').addEventListener('click', function() {
            scale = 1;
            updateZoom();
        });
        
        function updateZoom() {
            treeWrapper.style.transform = `scale(${scale})`;
            treeWrapper.style.transformOrigin = 'top left';
        }
        
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the full tree if data is available
            if (Object.keys(familyData).length > 0) {
                initializeFullTree();
            }
        });
        
        function initializeFullTree() {
            const treeWrapper = document.getElementById('tree-wrapper');
            treeWrapper.innerHTML = '';
            
            // Loop through each generation
            for (let i = 1; i <= 7; i++) {
                const genKey = `generation${i}`;
                
                if (familyData[genKey]) {
                    // Add generation divider
                    const divider = document.createElement('div');
                    divider.className = 'generation-divider';
                    divider.innerHTML = `<span class="generation-label">Generation ${i}</span>`;
                    treeWrapper.appendChild(divider);
                    
                    // Create generation container
                    const genContainer = document.createElement('div');
                    genContainer.className = `generation gen-${i}`;
                    genContainer.id = `full-gen-${i}`;
                    
                    // Add all people in this generation
                    const genData = familyData[genKey];
                    for (const personId in genData) {
                        const person = genData[personId];
                        const personElement = createPersonElement(person);
                        genContainer.appendChild(personElement);
                    }
                    
                    treeWrapper.appendChild(genContainer);
                }
            }
        }
        
        function createPersonElement(person) {
            const personElement = document.createElement('div');
            personElement.className = `person ${person.gender}`;
            personElement.setAttribute('data-id', person.id);
            
            // Create HTML content for person
            let personContent = `
                <h4>${person.name}</h4>
                <p class="dates">${person.birth || '?'} - ${person.death || 'Present'}</p>
            `;
            
            // Add spouse info if exists
            if (person.spouse) {
                personContent += `
                    <div class="spouse">
                        <p>Spouse: ${person.spouse.name}</p>
                        <p class="dates">${person.spouse.birth || '?'} - ${person.spouse.death || 'Present'}</p>
                    </div>
                `;
            }
            
            personElement.innerHTML = personContent;
            
            // Add click event
            personElement.addEventListener('click', function() {
                window.location.href = `person.html?id=${person.id}`;
            });
            
            return personElement;
        }
    </script>
</body>
</html>